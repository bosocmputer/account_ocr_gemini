// prompt_ocr_simple.go - Pure OCR Prompt (ไม่ต้อง extract structure)
//
// Prompt นี้ใช้สำหรับ Phase 2: Pure OCR
// เป้าหมาย: อ่านข้อความทั้งหมดจากเอกสาร ไม่ต้องสกัดเป็น JSON structure
// ลด token usage 60-70% เมื่อเทียบกับ Full Structured OCR

package ai

import "fmt"

// GetPureOCRPrompt สร้าง prompt สำหรับการอ่าน OCR แบบ Pure Text
// AI จะอ่านข้อความทั้งหมดที่เห็น โดยไม่ต้องสกัดเป็น fields
func GetPureOCRPrompt() string {
	return `
คุณคือผู้เชี่ยวชาญด้าน OCR (Optical Character Recognition) สำหรับเอกสารภาษาไทย

🎯 **งานของคุณ: อ่านข้อความทั้งหมดที่มองเห็นในเอกสาร**

ไม่ต้องวิเคราะห์ ไม่ต้องสกัดข้อมูล ไม่ต้องทำความเข้าใจ
แค่ **อ่านทุกตัวอักษรที่เห็น** และส่งกลับมาเป็นข้อความเปล่าๆ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📖 หลักการอ่าน OCR
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ **อ่านทุกอย่างที่เห็น:**
- Header (ส่วนบนสุด): ชื่อร้าน, ที่อยู่, เบอร์โทร, อีเมล, Tax ID
- เนื้อหาหลัก: รายการสินค้า, ราคา, ยอดรวม, บาร์โค้ด
- Footer (ส่วนล่าง): ข้อความขอบคุณ, หมายเหตุ, เงื่อนไข
- ข้อความพิเศษ: โปรโมชั่น, ส่วนลด, คำแนะนำ
- ข้อความเล็กๆ: วันที่พิมพ์, เวลา, เลขที่เครื่อง
- **ทุกบรรทัดข้อความที่มองเห็น**

✅ **อ่านจากบนลงล่าง, ซ้ายไปขวา:**
- ตามลำดับที่ปรากฏในเอกสาร
- อย่าข้ามบรรทัด อย่าข้ามส่วน
- อย่าจัดเรียงใหม่ ให้เป็นตามเอกสารต้นฉบับ

✅ **คั่นแต่ละบรรทัดด้วย newline (\n):**
- 1 บรรทัดในเอกสาร = 1 บรรทัดใน output
- ถ้ามีข้อความหลายคอลัมน์ → อ่านตามลำดับ ซ้ายไปขวา

✅ **เก็บข้อความดิบๆ ไม่ต้องจัดรูปแบบ:**
- ไม่ต้องใส่ markdown
- ไม่ต้องใส่เครื่องหมายอัญประกาศ
- ไม่ต้องแปลง
- ไม่ต้องอธิบาย
- **แค่อ่านแล้วส่งกลับ**

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ สำคัญมาก: หลักการอ่านที่ถูกต้อง
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1️⃣ **ตัวเลข - ระมัดระวังสูงสุด:**
   - อ่านทีละหลักอย่างระมัดระวัง
   - แยกให้ได้: 0 vs O, 1 vs l vs I, 5 vs S, 8 vs B, 6 vs G, 9 vs g
   - **เก็บเลข 0 นำหน้าทั้งหมด** (เช่น "008131560570" ไม่ใช่ "8131560570")
   - บาร์โค้ด: 13 หลัก (EAN-13) ขึ้นต้นด้วย 885 สำหรับไทย
   - เลขที่ใบเสร็จ: 8-15 หลัก อาจมี ตัวอักษร/ขีด/ทับ
   - เลข Tax ID: 13 หลัก รูปแบบ 0-0000-00000-00-0

2️⃣ **อักษรไทย - ใช้บริบทช่วย:**
   - ถ้าไม่ชัด → ใช้บริบทรอบข้างคาดเดา
   - ระวัง: ไ vs ใ, ั vs ้, ำ vs า
   - คำทั่วไป: นม, ไข่, น้ำ, ข้าว, เตา, แม่เหล็ก
   - ถ้าอ่านไม่ออกจริงๆ → ใส่ "???" แทน (อย่าเดา)

3️⃣ **อักษรอังกฤษ - อ่านตามที่เห็น:**
   - รักษา case: "MAKRO" ไม่ใช่ "makro"
   - รักษาช่องว่าง: "Big C" ไม่ใช่ "BigC"
   - เครื่องหมาย: เก็บทั้งหมด (/, -, _, ., @)

4️⃣ **สัญลักษณ์และตัวเลขพิเศษ:**
   - สกุลเงิน: บาท, ฿, THB
   - หน่วย: กก., ลิตร, ชิ้น, แพ็ค
   - เครื่องหมาย: +, -, ×, =, %
   - เก็บทั้งหมด

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 ตัวอย่างผลลัพธ์ที่ดี
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

ตัวอย่างเอกสาร → ผลลัพธ์ที่ต้องการ:

EXAMPLE OUTPUT:
บริษัท ซีแอนด์ฮิล จำกัด
เลขประจำตัวผู้เสียภาษี 0-5055-39002-68-2
123 ถนนสุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110
โทร. 02-123-4567
ใบเสร็จรับเงิน/ใบกำกับภาษี
เลขที่: 008131560570
วันที่: 06/10/2020
8851443404007
เตาแม่เหล็กIMARFLEX#IF-866/404
1 ชิ้น × 1,290.00 = 1,290.00
ยอดรวม 1,205.61
ภาษีมูลค่าเพิ่ม 7% 84.39
รวมทั้งสิ้น 1,290.00
ขอบคุณที่ใช้บริการ

⚠️ **หมายเหตุ:**
- อ่านทุกบรรทัด ไม่ข้าม
- แยกบรรทัดด้วย newline
- ไม่ต้องใส่ markdown, หัวข้อ, หรือคำอธิบาย
- ส่งแค่ข้อความดิบๆ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ สิ่งที่ห้ามทำ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

❌ อย่าวิเคราะห์ความหมาย
❌ อย่าสกัดข้อมูลเป็น fields (receipt_number, total_amount, etc.)
❌ อย่าสร้าง JSON structure
❌ อย่าจัดกลุ่มข้อมูล (header, items, footer)
❌ อย่าข้ามบรรทัดที่ดูไม่สำคัญ (อ่านทุกบรรทัด!)
❌ อย่าเพิ่มคำอธิบาย หรือ summary
❌ อย่าแปลภาษา (ให้เป็นตามเอกสาร)
❌ อย่าจัดรูปแบบ (ไม่ต้อง bold, italic, bullet points)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 สรุปงานของคุณ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

INPUT: รูปภาพเอกสาร
PROCESS: อ่าน OCR ทุกตัวอักษรที่เห็น
OUTPUT: ข้อความดิบๆ แยกด้วย newline

**ยิ่งละเอียดยิ่งดี - อ่านทุกบรรทัด ไม่ข้าม!**

เริ่มอ่านเอกสารได้เลย!
`
}

// GetTemplateMatchingPrompt creates a prompt for AI-based template matching
// This is used in Phase 2.5 to intelligently match document with accounting templates
func GetTemplateMatchingPrompt(documentText string, templateDescriptions []string) string {
	prompt := `
คุณคือผู้เชี่ยวชาญด้านการจับคู่เอกสารบัญชี

🎯 **งานของคุณ: วิเคราะห์เอกสารและหา Template ที่ตรงที่สุด**

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📄 ข้อความจากเอกสาร (OCR)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

` + documentText + `

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 Template ทางบัญชีที่มีในระบบ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

`

	for i, desc := range templateDescriptions {
		prompt += fmt.Sprintf("%d. %s\n", i+1, desc)
	}

	prompt += `
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🧠 วิธีการวิเคราะห์
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**ขั้นตอนที่ 1: ทำความเข้าใจเอกสาร**
- อ่านเอกสารทั้งหมด
- ดูชื่อร้าน/บริษัทผู้ออกเอกสาร
- ดูประเภทสินค้า/บริการที่ซื้อ
- ดูคำสำคัญในเอกสาร

**ขั้นตอนที่ 2: เปรียบเทียบกับ Template**
- ดู description ของแต่ละ template
- หาความเกี่ยวข้องระหว่างเอกสารกับ template description
- ใช้ความรู้ทางบัญชีและธุรกิจในการตัดสิน

**ตัวอย่างการวิเคราะห์:**

✅ ถ้าเอกสารมี:
  - "เบนซิน", "ดีเซล", "แก๊สโซฮอล์", "ปั๊ม", "ลิตร"
  - ชื่อบริษัทน้ำมัน: "ปตท", "บางจาก", "เชลล์", "เอสโซ่"
  → ตรงกับ: **"ค่าน้ำมัน"** (90-100%)

✅ ถ้าเอกสารมี:
  - "การไฟฟ้า", "หน่วย", "kWh", "PEA", "MEA"
  - "ค่าไฟ", "เลขมิเตอร์"
  → ตรงกับ: **"ค่าไฟฟ้า"** (90-100%)

✅ ถ้าเอกสารมี:
  - "การประปา", "ลูกบาศก์เมตร", "น้ำประปา"
  - "เลขมิเตอร์น้ำ"
  → ตรงกับ: **"ค่าน้ำประปา"** (90-100%)

✅ ถ้าเอกสารมี:
  - "อินเทอร์เน็ต", "ทรู", "AIS", "3BB", "Fiber"
  - "ค่าเน็ต", "Mbps", "แพ็กเกจ"
  → ตรงกับ: **"ค่าอินเตอร์เน็ท"** (90-100%)

✅ ถ้าเอกสารมี:
  - ชื่อบริษัทที่ทำบัญชี
  - "ค่าทำบัญชี", "ค่าที่ปรึกษา", "ค่าบริการทางการเงิน"
  → ตรงกับ: **"บันทึกค่าทำบัญชี"** (90-100%)

⚠️ **สำคัญ:**
- ให้คะแนน confidence 0-100%
- ต่ำกว่า 60% = ไม่แน่ใจ (ควรใช้ full mode)
- 60-84% = ค่อนข้างแน่ใจ (แต่ยังไม่ผ่านเกณฑ์)
- 85-100% = แน่ใจมาก (ใช้ template-only mode ได้)
- ถ้าไม่มี template ไหนเข้าข่าย ให้เลือก "ค่าใช้จ่ายเบ็ดเตล็ด" แทน

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📤 ตอบกลับ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

ให้ตอบเป็น JSON format:
- matched_template: ชื่อ template ที่ตรงที่สุด (string)
- confidence: ความมั่นใจ 0-100 (integer)
- reasoning: เหตุผลที่เลือก template นี้ (string, สั้นๆ ภาษาไทย)
`

	return prompt
}
